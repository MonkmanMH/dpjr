---
title: "Data generation—CR25 orders"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Data generation—CR25 orders}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```


## Introduction

This vignette describes the creation of some data files that present a variety of data wrangling challenges, as well as some interesting analytic opportunities.

This is based on my own experience in the late 1980s, to a time when I was working for a wholesale company that distributed LPs, cassettes, and those new-fangled compact discs to a wide range of retailers. 


## The Scenario

The fictional wholesale company, CR25 (for "Classic Rock 25") only sells 25 album titles. They are the biggest selling / most famous albums by the 25 most-played artists shown in Walt Hickey's article "Why Classic Rock Isn’t What It Used To Be". ^[Walt Hickey, [Why Classic Rock Isn’t What It Used To Be](https://fivethirtyeight.com/features/why-classic-rock-isnt-what-it-used-to-be/) (FiveThirtyEight, 2014-07-07). The GitHub page with the data for Walt Hickey's article is available through [GitHub](https://github.com/fivethirtyeight/data/tree/master/classic-rock).] 

There are two sets of files. The first is associated with the orders placed by individual stores to the warehouse. The second cover a variety of human resource files, including responses to a staff survey.

The files within the subdirectory `cr25` are as follows:

```{r data_list_cr25}
list.files(dpjr::dpjr_data("cr25"))
```

## Orders

The central table in this relational database shows the details of each store's orders...but this table needs to be compiled for four quarterly CSV files. 

These can then be linked to other tables about the stores. 



### Input data

To create the album list, I created a csv file with the artist and percentage of all plays fields, using the table in the article (which is displayed as an image; note that there appears to be an error in the table, in that Boston has a lower rank but a higher percentage than Queen or Journey). I also added a representative album by that artist—I used some judgement here. The album is the biggest selling, most famous, and/or the one with the most hit singles that the artist made. I also opted for a "no compilations" rule; one could make the case that, as one example, The Rolling Stones might be better or more accurately represented by _Hot Rocks_. 

I also added a price field; albums released before 1976 are \$7.98, [those released 1976-1981 are $8.98](https://en.wikipedia.org/wiki/Hard_Promises#History), and 1982 and beyond are \$9.98. The sole exception to this is Pink Floyd's double album _The Wall_, which I priced at \$14.98.

```{r cr25_538_read, warning=FALSE, message=FALSE}

albumlist <- read.csv(dpjr::dpjr_data("cr25/cr25_538.csv"))
albumlist

```


The next step was to create a csv file with some fictional stores. What I did here was use the names of now-defunct Canadian chains that were record retailers active in the 70s and 80s. You can find them listed in the [Wikipedia List of defunct Canadian companies](https://en.wikipedia.org/wiki/List_of_defunct_Canadian_companies#Consumer_retail,_including_grocery) I left off HMV, as it was an international brand that was late to the market.

I also assigned each store to one of four regions (based on the cardinal points of the compass), and gave them a store ID number.

```{r cr25_storelist_read, warning=FALSE, message=FALSE}

storelist <- read.csv(dpjr::dpjr_data("cr25/cr25_storelist.csv"))

head(storelist)

```



#### Future development

It could also be expanded to include additional years (with some trends embedded), inventory management, and customer relationship management (CRM).


***

## Human resources

### Staff list

This file describes the values in the synthetic data file "CR25_staff_list.xls". This file is the list of all staff of the fictional wholesale company, CR25 (for "Classic Rock 25"). This file can be linked to the survey data file [SPSS file name here]. 

#### Variables

* Last name

* First name

* Employee ID

* Date of birth

* Canadian employee equity group

* Date of hire

* Classification group

* Occupation

* Department


### Survey results

This is an SPSS ".sav" file.



